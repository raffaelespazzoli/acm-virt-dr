apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: prod-a

resources:
  - ./namespace.yaml

helmGlobals:
  chartHome: ../../../../.helm/charts

helmCharts:
  - name: aws-cluster
    releaseName: prod-a
    namespace: prod-a
    valuesInline:
      region: us-east-2
  - name: cluster-registration
    releaseName: prod-a
    namespace: prod-a
    valuesInline: 
      clusterName: prod-a
      platformDomain: ${PLATFORM_BASE_DOMAIN}
      hubDomain: ${CLUSTER_BASE_DOMAIN}    
      clusterSet: default
      repoURL: ${INFRA_GITOPS_REPO}
      labels:
        cloud: AWS
        vendor: OpenShift
        region: us-east-2

  # - name: vault-cluster-registration
  #   releaseName: prod-a
  #   namespace: vault-admin
  #   valuesInline:
  #     cluster:
  #       apiUrl: https://api.prod-a.${PLATFORM_BASE_DOMAIN}:6443    
    